<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Usuario - Galaxia Magna Academy</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <!--
    HEADER (Encabezado):
    Aqu√≠ va el t√≠tulo principal de la p√°gina. Sirve para que el usuario sepa d√≥nde est√° y da identidad al sitio.
    Puedes poner el nombre de la plataforma, el logo o ambos.
  -->
  <header>
    <img src="images/GAM_transparent.png" alt="Galaxia Magna Academy Logo" style="width: 80px; height: 80px; object-fit: contain;">
    <div class="header-text">
      <h1>Galaxia Magna Academy</h1>
      <h2>Sapientia per Stellam</h2>
    </div>
    <img src="images/GAM_transparent.png" alt="GMA Logo" style="width: 80px; height: 80px; object-fit: contain;">
  </header>

  <main>
    <!-- Success Popup Modal -->
    <div id="success-popup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center;">
      <div style="background: #23232b; border-radius: 16px; padding: 40px; max-width: 500px; margin: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border: 2px solid #f18b32; text-align: center;">
        <div style="margin-bottom: 20px;">
          <i style="font-size: 36px; color: #f18b32;">‚úÖ</i>
        </div>
        <h3 style="color: #f18b32; margin-bottom: 16px; font-size: 1.4em;">¬°Usuario Registrado Exitosamente!</h3>
        <p style="color: #c9c9c9; margin-bottom: 8px; font-size: 1.0em;" id="popup-username">Usuario: <span id="popup-username-value"></span></p>
        <p style="color: #c9c9c9; margin-bottom: 8px; font-size: 1.0em;" id="popup-email">Email: <span id="popup-email-value"></span></p>
        <p style="color: #c9c9c9; margin-bottom: 20px; font-size: 1.0em;" id="popup-rol">Rol: <span id="popup-rol-value"></span></p>
        
        <div style="background: #2d2d35; border-radius: 8px; padding: 20px; margin: 20px 0; border: 1px solid #4a4a55;">
          <p style="color: #f18b32; margin-bottom: 8px; font-weight: bold; font-size: 1.0em;">C√≥digo de Usuario:</p>
          <p style="color: #c9c9c9; font-size: 1.2em; font-weight: bold; font-family: monospace; margin-bottom: 12px;" id="popup-code-value"></p>
          <p style="color: #a1a1aa; font-size: 0.9em; margin-bottom: 12px;">‚ö†Ô∏è Por favor, guarda este c√≥digo. Lo necesitar√°s para iniciar sesi√≥n.</p>
          <button onclick="copiarCodigoAlPortapapeles()" style="background: #4a5568; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.9em; margin-right: 10px;">
            üìã Copiar C√≥digo
          </button>
          <button onclick="guardarCodigoArchivo()" style="background: #2d3748; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.9em;">
            üíæ Guardar como Archivo
          </button>
        </div>
        
        <div style="margin-top: 24px;">
          <button onclick="cerrarPopupYVolverInicio()" style="background: #f18b32; color: white; border: none; padding: 12px 32px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1.0em;">
            Entendido, ir al Inicio
          </button>
        </div>
      </div>
    </div>

    <!-- Club Information Popup Modal -->
    <div id="club-info-popup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center;">
      <div style="background: #23232b; border-radius: 16px; padding: 40px; max-width: 600px; margin: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border: 2px solid #f18b32; text-align: left;">
        <div style="display: flex; align-items: center; margin-bottom: 20px;">
          <i style="font-size: 24px; color: #f18b32; margin-right: 12px;">‚ÑπÔ∏è</i>
          <h3 style="color: #f18b32; margin: 0; font-size: 1.3em;">Informaci√≥n sobre los Clubes</h3>
        </div>
        
        <div style="color: #c9c9c9; line-height: 1.6; font-size: 1.0em; margin-bottom: 24px;">
          <p style="margin-bottom: 14px;">
            Unirse a un club universitario es una oportunidad
            para conocer personas con intereses similares,
            desarrollar nuevas habilidades
            y enriquecer la experiencia acad√©mica
            con actividades fuera de las clases.
          </p>
          
          <p style="margin-bottom: 14px;">
            Aunque es totalmente opcional,
            participar en un club puede abrir puertas
            a amistades duraderas
            y a un crecimiento personal que complementa tu formaci√≥n.
          </p>
          
          <p style="margin-bottom: 0; color: #f18b32; font-weight: bold;">
            Adem√°s, ganar√°s puntos extra
            que te ayudar√°n a cumplir m√°s f√°cilmente
            los requisitos para la graduaci√≥n.
          </p>
        </div>
        
        <div style="text-align: center;">
          <button onclick="cerrarPopupClubInfo()" style="background: #f18b32; color: white; border: none; padding: 12px 32px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1.1em;">
            Entendido
          </button>
        </div>
      </div>
    </div>

    <section>
      <!--
        FORMULARIO DE REGISTRO:
        P√°gina dedicada al registro de nuevos usuarios.
        Accesible solo para administradores.
      -->

      <!-- Navigation -->
      <nav style="margin-bottom: 20px;">
        <ul>
          <li><a href="index.html">‚Üê Volver al Inicio</a></li>
          <li><a href="#" id="ayuda-nav-link" onclick="document.getElementById('ayuda-popup-msg').style.display='flex';return false;">¬øC√≥mo llenar el formulario?</a></li>
        </ul>
      </nav>

      <!-- Mensaje de registro -->
      <div id="registro-msg" style="display:none; font-weight:bold; margin-bottom:16px;"></div>
      
      <h2 style="color: #f18b32; text-align: center; margin-bottom: 30px;">Registro de Nuevo Usuario</h2>

      <form id="registro-form" method="post">

        <!--
          Cada grupo de campos tiene su propio div para que el label quede arriba del input.
          Esto mejora la legibilidad y la experiencia de usuario.
        -->

        <fieldset>
          <legend>Registro de usuario</legend>
          
          <!-- Row y Col: Sistema de columnas para organizar el contenido en filas y columnas -->
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <!-- Form-label: Etiqueta que describe el campo de entrada -->
                <label for="username" class="form-label">Nombre de Usuario:</label>
                <!-- Form-control: Estilo para campos de entrada como text, email, password -->
                <input class="form-control" type="text" id="username" name="username" required>
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Correo Electr√≥nico:</label>
                <input class="form-control" type="email" id="email" name="email" required oninput="document.getElementById('email-error').style.display='none'">
                <span id="email-error" style="color: #ff6b6b; display: none;">El correo debe contener un @</span>
              </div>
              <div class="mb-3">
                <label for="telefono" class="form-label">Tel√©fono de Contacto:</label>
                <input class="form-control" type="tel" id="telefono" name="telefono" placeholder="Ej: 8888-8888">
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="mb-3">
                <label for="password" class="form-label">Contrase√±a: (debe ser de 6 caracteres)</label>
                <input class="form-control" type="password" id="password" name="password" required>
              </div>
              <div class="mb-3">
                <label for="confirm-password" class="form-label">Confirmar Contrase√±a:</label>
                <input class="form-control" type="password" id="confirm-password" name="confirm-password" required>
              </div>
              <div class="mb-3">
                <label for="fecha-nacimiento" class="form-label">Fecha de Nacimiento:</label>
                <input class="form-control" type="date" id="fecha-nacimiento" name="fecha-nacimiento" required>
              </div>
            </div>
          </div>

          <!-- Segunda fila: Rol, Fecha de Inscripci√≥n y C√≥digo -->
          <div class="row mt-3">
            <div class="col-md-4">
              <div class="mb-3">
                <label for="rol" class="form-label">Rol:</label>
                <select class="form-select" id="rol" name="rol" required onchange="manejarCambioRol()">
                  <option value="">Seleccione un rol</option>
                  <option value="estudiante" selected>Estudiante</option>
                  <option value="profesor">Profesor</option>
                  <option value="administrador">Administrador</option>
                </select>
              </div>
              <!-- Campo de contrase√±a para roles especiales -->
              <div class="mb-3" id="password-rol-container" style="display: none;">
                <label for="password-rol" class="form-label">Contrase√±a del rol:</label>
                <input class="form-control" type="password" id="password-rol" name="password-rol" placeholder="Ingrese la contrase√±a del rol">
                <small class="form-text text-muted" id="password-rol-hint"></small>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-3">
                <label for="fecha-inscripcion" class="form-label">Fecha de Inscripci√≥n:</label>
                <input class="form-control" type="date" id="fecha-inscripcion" name="fecha-inscripcion" required readonly style="color:gray;" value="2025-08-18">
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-3">
                <label for="codigo-estudiante" class="form-label">C√≥digo de Usuario:</label>
                <input class="form-control" type="text" id="codigo-estudiante" name="codigo-estudiante" readonly placeholder="Se genera autom√°ticamente" style="background-color: #f8f9fa;">
                <small class="form-text text-muted">Formato: AAAA_MM_ROL_0001</small>
              </div>
            </div>
          </div>

          <!--
            G√âNERO:
            Usa radio buttons para que el usuario solo pueda elegir una opci√≥n.
            Los labels est√°n en l√≠nea para que se vean ordenados.
          -->
          <fieldset class="mt-4">
            <legend>G√©nero</legend>
            <!-- Form-check: Contenedor para radio buttons y checkboxes -->
            <div class="form-check">
              <!-- Form-check-input: Radio buttons para seleccionar una opci√≥n -->
              <input class="form-check-input" type="radio" value="m" name="gender" id="g-m">
              <!-- Form-check-label: Etiqueta para radio buttons y checkboxes -->
              <label class="form-check-label" for="g-m">Masculino</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" value="f" name="gender" id="g-f">
              <label class="form-check-label" for="g-f">Femenino</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" value="o" name="gender" id="g-o">
              <label class="form-check-label" for="g-o">Otro</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" value="n" name="gender" id="g-n">
              <label class="form-check-label" for="g-n">Prefiero no decirlo</label>
            </div>
          </fieldset>

          <!--
            AVATAR DE G√âNERO:
            Muestra una imagen que cambia seg√∫n la selecci√≥n de g√©nero.
            Adem√°s, si pasas el mouse sobre el avatar, gira 360¬∞ (ver CSS para la animaci√≥n).
          -->
          <fieldset>
            <legend style="visibility: hidden; height: 0; margin: 0; padding: 0;"></legend>
            <div style="display: flex;">
              <div id="avatar-genero"
                class="img_box">
                <img id="img-avatar-genero"
                  src="images/GMA.png"
                  alt="Avatar G√©nero"
                  >
              </div>
            </div>
          </fieldset>

          <!--
            INTERESES:
            Usa checkboxes para que el usuario pueda elegir varios intereses.
            Al seleccionar un inter√©s, la imagen correspondiente se ilumina (ver JS y CSS).
            Si seleccionas Star Wars, aparece un mensaje especial que se desvanece (ver JS y CSS).
          -->
          <fieldset class="mt-4">
            <legend>Selecciona un club para unirte:</legend>
            <div class="mb-3">
              <label for="intereses" class="form-label">
                Elige tu club preferido:
                <i id="info-club" style="margin-left: 8px; color: #f18b32; cursor: pointer; font-size: 1.1em; border: 1px solid #f18b32; border-radius: 50%; width: 20px; height: 20px; display: inline-flex; align-items: center; justify-content: center; font-style: normal; font-weight: bold;" title="Informaci√≥n sobre los clubes" onclick="document.getElementById('club-info-popup').style.display='flex'">i</i>
              </label>
              <select class="form-select" id="intereses" name="intereses" required onchange="manejarSeleccionClub()">
                <option value="" disabled selected style="color:gray;">Selecciona un Club</option>
                <option value="ajedrez">Club de Ajedrez</option>
                <option value="arte">Club de Arte</option>
                <option value="deportes">Club de Deportes</option>
                <option value="idiomas">Club de Idiomas</option>
                <option value="matematica">Club de Matem√°tica</option>
                <option value="musica">Club de M√∫sica</option>
                <option value="programacion">Club de Programaci√≥n</option>
                <option value="starwars">Club Star Wars</option>
                <option value="otro">Otro club</option>
                <option value="ninguno">No estoy interesado</option>
              </select>
            </div>
            <!-- Mensaje especial de la fuerza para Star Wars -->
            <div id="fuerza-msg" style="display: none; text-align: center; margin-top: 15px; opacity: 0; transition: opacity 2s;">
              <div style="color: #f18b32; font-weight: bold; margin-bottom: 8px;">
                ‚ú® May the Force be with you! ‚ú®
              </div>
              <div style="color: #ffff00; font-weight: bold; font-style: italic;">
                The force is strong with this one.
              </div>
            </div>
          </fieldset>

          <!-- Mensaje especial de la fuerza prominente -->
          <div id="fuerza-msg-principal" style="text-align: center; margin: 20px 0; height: 40px; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 2s;">
            <div style="color: #ffff00; font-weight: bold; font-style: italic; font-size: 1.4em; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); font-family: Arial, sans-serif;">
              The force is strong with this one.
            </div>
          </div>

          <!-- Botones de acci√≥n -->
          <div class="d-grid gap-2 d-md-flex justify-content-md-center" style="margin-top: 30px;">
            <button class="btn btn-primary me-md-2" type="submit">Registrar Usuario</button>
            <a href="index.html" class="btn btn-secondary">Cancelar</a>
          </div>
        </fieldset>
      </form>
    </section>

    <!-- P√°gina de Ayuda como subp√°gina -->
    <section id="ayuda" style="display:none; padding:40px 20px; max-width:600px; margin:40px auto; background:#23232b; border-radius:12px; box-shadow:0 4px 24px #0008; color:#fff;">
  <!-- Removed extra button, popup will open from nav link -->
<!-- Ayuda popup moved outside main for guaranteed visibility -->
</section>
<div id="ayuda-popup-msg" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.8); z-index:99999; justify-content:center; align-items:center;">
  <div style="background:#23232b; border-radius:16px; padding:40px; max-width:500px; margin:20px; box-shadow:0 8px 32px rgba(0,0,0,0.3); border:2px solid #f18b32; text-align:left; color:#fff;">
    <div style="display: flex; align-items: center; margin-bottom: 20px;">
      <i style="font-size: 24px; color: #f18b32; margin-right: 12px;">‚ÑπÔ∏è</i>
      <h3 style="color:#f18b32; margin: 0; font-size:1.3em;">Gu√≠a para llenar el formulario</h3>
    </div>
    <ul style="margin-bottom:24px;">
      <li>Completa todos los campos obligatorios marcados con <b>*</b>.</li>
      <li>Elige el <b>rol</b> adecuado para el usuario (estudiante, profesor, administrador).</li>
      <li>Selecciona el <b>club</b> que m√°s te interese para obtener beneficios adicionales.</li>
      <li>Verifica que el <b>correo electr√≥nico</b> sea v√°lido y que la <b>contrase√±a</b> cumpla los requisitos.</li>
      <li>Guarda el <b>c√≥digo de usuario</b> generado, lo necesitar√°s para iniciar sesi√≥n.</li>
    </ul>
    <div style="text-align: center;">
      <button id="cerrar-ayuda-popup" style="background:#f18b32; color:white; border:none; padding:10px 30px; border-radius:8px; font-weight:bold; cursor:pointer;">Entendido</button>
    </div>
  </div>
</div>
    </section>
  </main>
<!-- Ayuda section remains, but will be shown/hidden as a popup -->
  <footer>
  </footer>

  <!--
    Caja informativa:
    Este bloque invita a los usuarios a aprender m√°s de HTML. El enlace lleva a W3Schools, un sitio recomendado para principiantes.
    TIP: Usa recursos externos para complementar tu aprendizaje.
  -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="config.js"></script>
  <script src="scripts.js"></script>
<script>
// Only close logic for Ayuda popup
document.addEventListener('DOMContentLoaded', function() {
  var cerrarPopup = document.getElementById('cerrar-ayuda-popup');
  var ayudaMsg = document.getElementById('ayuda-popup-msg');
  if (cerrarPopup && ayudaMsg) {
    cerrarPopup.onclick = function() {
      ayudaMsg.style.display = 'none';
    };
  }
});
// Only close logic for Ayuda popup
document.addEventListener('DOMContentLoaded', function() {
  var cerrarPopup = document.getElementById('cerrar-ayuda-popup');
  var ayudaMsg = document.getElementById('ayuda-popup-msg');
  if (cerrarPopup && ayudaMsg) {
    cerrarPopup.onclick = function() {
      ayudaMsg.style.display = 'none';
    };
  }
});
</script>
</main>
<script>
// Show club info popup when info icon is clicked
document.addEventListener('DOMContentLoaded', function() {
  var infoClub = document.getElementById('info-club');
  if (infoClub) {
    infoClub.onclick = function() {
      document.getElementById('club-info-popup').style.display = 'flex';
    };
  }
  var closeBtn = document.querySelector('#club-info-popup button');
  if (closeBtn) {
    closeBtn.onclick = function() {
      document.getElementById('club-info-popup').style.display = 'none';
    };
  }
});
</script>
</body>
</html>