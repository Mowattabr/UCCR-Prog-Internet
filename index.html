<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shared Web Page</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <!--
    HEADER (Encabezado):
    Aquí va el título principal de la página. Sirve para que el usuario sepa dónde está y da identidad al sitio.
    Puedes poner el nombre de la plataforma, el logo o ambos.
  -->
  <header>
    <img src="images/GAM_transparent.png" alt="Galaxia Magna Academy Logo" style="width: 80px; height: 80px; object-fit: contain;">
    <div class="header-text">
      <h1>Galaxia Magna Academy</h1>
      <h2>Sapientia per Stellam</h2>
    </div>
    <img src="images/GAM_transparent.png" alt="GMA Logo" style="width: 80px; height: 80px; object-fit: contain;">
  </header>

  <main>
    <section>
      <!--
        FORMULARIO PRINCIPAL:
        Aquí el usuario puede iniciar sesión rápidamente.
      -->

      <form id="login-form">

        <!--
          MENSAJE DE SALUDO (Greeting):
          Este div se muestra arriba del fieldset de Login cuando el usuario inicia sesión.
        -->

        <div id="login-rapido-wrapper">
          <div id="login-msg"></div>
          
          <!-- Navigation moved here to align with Login section -->
          <nav>
            <ul>
              <!-- <li><a href="index.html">Inicio</a></li> Enlace a la página de inicio -->
              <li class="nav-privado"><a href="#cursos">Cursos</a></li>      <!-- Enlace a la sección de cursos -->
              <li class="nav-privado"><a href="#estudiantes">Estudiantes</a></li>      <!-- Enlace a la sección de estudiantes -->
              <li class="nav-privado"><a href="#profesores">Profesores</a></li>      <!-- Enlace a la sección de profesores -->
              <li class="nav-privado"><a href="profile.html">Mi Perfil</a></li>      <!-- Enlace al perfil del usuario -->
              <li><a href="#contacto">Contacto</a></li>    <!-- Enlace a la sección de contacto -->
              <li><a href="#ayuda">Ayuda</a></li>       <!-- Enlace a la sección de ayuda -->
              <li><a href="#aprende-mas">Aprende más</a></li>       <!-- Enlace a la sección de recursos educativos -->
            </ul>
          </nav>
          
          <!--
            FIELDSET DE LOGIN :
            Permite a los usuarios iniciar sesión rápidamente sin llenar el formulario completo de registro.
          -->
          <fieldset>
            <legend>Login</legend>
            <div class="row">
              <div class="col-12">
                <div class="mb-3">
                  <label for="login-username" class="form-label">Email o Código de Usuario:</label>
                  <input class="form-control" type="text" id="login-username" name="login-username" autocomplete="username" placeholder="Ej: usuario@email.com o 2025_08_A_0001">
                  <small class="form-text text-muted">Puedes usar tu email o código de usuario para iniciar sesión</small>
                </div>
                <div class="mb-3">
                  <label for="login-password" class="form-label">Contraseña:</label>
                  <input class="form-control" type="password" id="login-password" name="login-password" autocomplete="current-password">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                  <button type="button" class="btn btn-primary me-md-2" onclick="iniciarSesion()">Iniciar sesión</button>
                  <a href="registro.html" class="btn btn-registro">Formulario de registro</a>
                </div>
              </div>
            </div>
          </fieldset>
        </div>

      </form>

      
    </section>

    <!-- Página de Ayuda como subpágina -->
    <section id="ayuda" class="section-modal">
      <h2>Ayuda</h2>
      <p>Esta es una <b>página de prueba</b> que emula el registro para la Universidad Central de Costa Rica (UCCR).</p>
      <p>No ingreses datos personales reales, ya que esta página es solo para fines de demostración.</p>
      <p>Si tienes dudas o necesitas ayuda, puedes contactar a <b>Allan VillaLobos</b>.</p>
      
      <!-- Botón para login como invitado -->
      <div class="guest-login-box">
        <p>¿Quieres explorar el sistema sin registrarte?</p>
        <button onclick="loginComoInvitadoDirecto()" class="guest-login-button">
          Logeate como invitado
        </button>
      </div>
      
      <button id="cerrar-ayuda" class="close-section-btn">Cerrar</button>
    </section>

    <!-- Página de Cursos como subpágina -->
    <section id="cursos" class="section-modal">
      <h2>Cursos</h2>
      <div class="courses-table-container">
        <table class="tabla-cursos" >
          <thead>
            <tr class="table-header">
              <th class="cuatrimestre">Cuatrimestre</th>
              <th class="curso">Curso</th>
            </tr>
          </thead>
          <tbody>
            <tr><td class="cuatrimestre">I</td><td class="curso">Inglés I</td></tr>
            <tr><td class="cuatrimestre">I</td><td class="curso">Matemática I</td></tr>
            <tr><td class="cuatrimestre">I</td><td class="curso">Introducción a la Informática</td></tr>
            <tr><td class="cuatrimestre">I</td><td class="curso">Comunicación</td></tr>
            <tr><td class="cuatrimestre">II</td><td class="curso">Administración I</td></tr>
            <tr><td class="cuatrimestre">II</td><td class="curso">Contabilidad para Ingeniería</td></tr>
            <tr><td class="cuatrimestre">II</td><td class="curso">Inglés II</td></tr>
            <tr><td class="cuatrimestre">II</td><td class="curso">Programación de Cómputo I</td></tr>
            <tr><td class="cuatrimestre">III</td><td class="curso">Arquitectura de Computadoras</td></tr>
            <tr><td class="cuatrimestre">III</td><td class="curso">Programación Internet</td></tr>
            <tr><td class="cuatrimestre">III</td><td class="curso">Sistemas Computacionales (C)</td></tr>
            <tr><td class="cuatrimestre">III</td><td class="curso">Cálculo I</td></tr>
            <tr><td class="cuatrimestre">IV</td><td class="curso">Métodos Estadísticos I</td></tr>
            <tr><td class="cuatrimestre">IV</td><td class="curso">Finanzas para Ingeniería</td></tr>
            <tr><td class="cuatrimestre">IV</td><td class="curso">Estructura de Datos y Algoritmos</td></tr>
            <tr><td class="cuatrimestre">IV</td><td class="curso">Programación Computadoras II (Visual Basic)</td></tr>
            <tr><td class="cuatrimestre">V</td><td class="curso">Economía para Ingeniería</td></tr>
            <tr><td class="cuatrimestre">V</td><td class="curso">Organización de Archivos</td></tr>
            <tr><td class="cuatrimestre">V</td><td class="curso">Programación de Computadoras III (Visual Basic Avanzado)</td></tr>
            <tr><td class="cuatrimestre">V</td><td class="curso">Sistemas Operativos I</td></tr>
            <tr><td class="cuatrimestre">VI</td><td class="curso">Diseño y Optimización de Base de Datos</td></tr>
            <tr><td class="cuatrimestre">VI</td><td class="curso">Análisis y Diseño de Sistemas I</td></tr>
            <tr><td class="cuatrimestre">VI</td><td class="curso">Telemática</td></tr>
            <tr><td class="cuatrimestre">VI</td><td class="curso">Administración de Proyectos</td></tr>
            <tr><td class="cuatrimestre">VII</td><td class="curso">Análisis y Diseño de Sistemas II</td></tr>
            <tr><td class="cuatrimestre">VII</td><td class="curso">Investigación de Operaciones I</td></tr>
            <tr><td class="cuatrimestre">VII</td><td class="curso">Administración de Centros de Cómputo</td></tr>
            <tr><td class="cuatrimestre">VII</td><td class="curso">Telemática II</td></tr>
            <tr><td class="cuatrimestre">VIII</td><td class="curso">Investigación de Operaciones II</td></tr>
            <tr><td class="cuatrimestre">VIII</td><td class="curso">Auditoría de Sistemas Computacionales</td></tr>
            <tr><td class="cuatrimestre">VIII</td><td class="curso">Programación de Lenguaje de 4ta Generación</td></tr>
            <tr><td class="cuatrimestre">VIII</td><td class="curso">Seminario de Graduación</td></tr>
          </tbody>
        </table>
      </div>
      <button id="cerrar-cursos" class="close-section-btn">Cerrar</button>
    </section>

    <!-- Página de Estudiantes como subpágina -->
    <section id="estudiantes" class="section-modal">
      <h2>Estudiantes</h2>
      <table class="tabla-separada" >
        <thead>
          <tr class="table-header">
            <th>Nombre</th>
            <th class="descripcion">Descripción</th>
            <th class="materia">Materia</th>
            <th>Profesor</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><b>R2-D2</b></td><td class="descripcion">Especialista en interfaces y circuitos desde hace galaxias</td><td class="materia">Arquitectura de Computadoras</td><td>Dr. Gordon Moore</td>
          </tr>
          <tr>
            <td><b>Neo (Matrix)</b></td><td class="descripcion">Puede manipular la realidad, pero todavía batalla con los for loops</td><td class="materia">Programación de Cómputo I/II/III</td><td>Dra. Ada Lovelace</td>
          </tr>
          <tr>
            <td><b>Data (Star Trek)</b></td><td class="descripcion">Busca comprender la eficiencia de estructuras recursivas</td><td class="materia">Estructura de Datos y Algoritmos</td><td>MSc. Donald Knuth</td>
          </tr>
          <tr>
            <td><b>Tron</b></td><td class="descripcion">Salido de la red, desea entender cómo se ejecutan procesos en SO reales</td><td class="materia">Sistemas Operativos</td><td>MSc. Grace Hopper</td>
          </tr>
          <tr>
            <td><b>Miles Morales (Spider-Man)</b></td><td class="descripcion">Estudiante de STEM que crea su propia página en HTML para su traje</td><td class="materia">Programación Internet / Telemática</td><td>Dr. Tim Berners-Lee</td>
          </tr>
          <tr>
            <td><b>Megamind</b></td><td class="descripcion">Le encantan las matemáticas... si son para conquistar el mundo</td><td class="materia">Matemática / Cálculo / Estadística</td><td>MSc. Katherine Johnson</td>
          </tr>
          <tr>
            <td><b>Bruce Banner (Hulk)</b></td><td class="descripcion">Calcula riesgos financieros... antes de enojarse</td><td class="materia">Marketing Digital / Finanzas</td><td>Lic. Philip Kotler</td>
          </tr>
          <tr>
            <td><b>T-800 (Terminator)</b></td><td class="descripcion">Necesita aprender organización de datos humanos para su próxima misión</td><td class="materia">Organización de Archivos / Administración TI</td><td>Dr. Alan Turing</td>
          </tr>
          <tr>
            <td><b>Gwen Stacy (Spider-Gwen)</b></td><td class="descripcion">Diseñadora web y activista, domina GitHub como su telaraña</td><td class="materia">Programación Internet</td><td>Fabián Chinchilla Mayorga</td>
          </tr>
          <tr>
            <td><b>Cortana (Halo)</b></td><td class="descripcion">Quiere mejorar su capacidad de planificación de misiones complejas</td><td class="materia">Análisis y Diseño de Sistemas</td><td>Dra. Margaret Hamilton</td>
          </tr>
        </tbody>
      </table>
      <button id="cerrar-estudiantes" class="close-section-btn">Cerrar</button>
    </section>

    <!-- Página de Profesores como subpágina -->
    <section id="profesores" class="section-modal">
      <h2>Profesores</h2>
      <table class="tabla-separada" >
        <thead>
          <tr class="table-header">
            <th>Nombre</th>
            <th class="descripcion">Descripción</th>
            <th class="materia">Materia</th>
          </tr>
        </thead>
        <tbody id="profesores-tbody">
          <!-- Filas de profesores se llenan por JS -->
        </tbody>
      </table>
      <button id="cerrar-profesores" class="close-section-btn">Cerrar</button>
    </section>

    <!-- Página de Contacto como subpágina -->
    <section id="contacto" class="section-modal">
      <h2>Contacto</h2>
      <p>¿Tienes alguna pregunta o sugerencia? ¡Nos encantaría escucharte!</p>
      
      <form id="contacto-form" class="contacto-formulario">
        <div class="form-group">
          <label for="contacto-nombre" class="form-label">Nombre completo:</label>
          <input type="text" id="contacto-nombre" name="nombre" class="form-control" required>
          <small class="error-message" id="error-nombre"></small>
        </div>
        
        <div class="form-group">
          <label for="contacto-mensaje" class="form-label">Mensaje:</label>
          <textarea id="contacto-mensaje" name="mensaje" class="form-control" rows="5" required placeholder="Escribe tu mensaje aquí..."></textarea>
          <small class="error-message" id="error-mensaje"></small>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-enviar-contacto" id="btn-enviar">
            <span id="btn-text">Enviar mensaje</span>
            <span id="btn-loading" class="loading-spinner" style="display: none;">Enviando...</span>
          </button>
        </div>
        
        <!-- Mensaje de estado -->
        <div id="contacto-status" class="status-message" style="display: none;"></div>
      </form>
      
      <button id="cerrar-contacto" class="close-section-btn">Cerrar</button>
    </section>

    <!-- Página de Aprende más como subpágina -->
    <section id="aprende-mas" class="section-modal">
      <h2>Aprende más</h2>
      <p>Explora estos recursos educativos para profundizar tus conocimientos en desarrollo web.</p>
      
      <!-- Podcasts educativos -->
      <div class="recursos-educativos">
        <h3>Podcasts Recomendados</h3>
        <p>Aprende HTML y CSS con estos videos explicativos:</p>
        
        <div class="podcast-videos">
          <div class="podcast-item">
            <iframe width="480" height="270" src="https://www.youtube.com/embed/UVfJnSb844c" title="HTML e CSS para Principiantes – Explicado com Analogias (Portugués)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            <p>HTML e CSS para Principiantes – Explicado com Analogias (Portugués)</p>
          </div>
          <div class="podcast-item">
            <iframe width="480" height="270" src="https://www.youtube.com/embed/4kIwc6nm5rg" title="HTML y CSS para Principiantes – Explicado con Analogías (Español)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            <p>HTML y CSS para Principiantes – Explicado con Analogías (Español)</p>
          </div>
        </div>
        
        <!-- Enlaces recomendados -->
        <h3>Enlaces Recomendados</h3>
        <div class="enlaces-educativos">
          <div class="enlace-item">
            <h4>¿Quieres aprender más de HTML?</h4>
            <p>Visita el siguiente recurso recomendado para profundizar tus conocimientos:</p>
            <a href="https://www.w3schools.com/html/default.asp" target="_blank" class="btn-recurso">
              Aprende más de HTML en W3Schools
            </a>
          </div>
        </div>
      </div>
      
      <button id="cerrar-aprende-mas" class="close-section-btn">Cerrar</button>
    </section>

    <!-- Bootstrap CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  </main>

  <footer>
  </footer>

  <script src="script.js"></script>
  
  <script>
    // Función para iniciar sesión usando base de datos lista_usuarios
    async function iniciarSesion() {
      const usernameOrEmail = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
      
      // Validar que los campos no estén vacíos
      if (!usernameOrEmail || !password) {
        mostrarMensaje('Por favor, ingresa email/código de usuario y contraseña.', 'error');
        return;
      }
      
      // Mostrar mensaje de carga
      mostrarMensaje('Verificando credenciales...', 'info');
      
      try {
        // FIXED: Search by email first, then by codigo_usuario if not found
        let searchUrl;
        let user = null;
        
        // Try email first (more specific)
        if (usernameOrEmail.includes('@')) {
          searchUrl = `https://qjtojggjtouvgljlozwr.supabase.co/rest/v1/lista_usuarios?email=eq.${encodeURIComponent(usernameOrEmail)}`;
        } else {
          // If no @, assume it's a user code
          searchUrl = `https://qjtojggjtouvgljlozwr.supabase.co/rest/v1/lista_usuarios?codigo_usuario=eq.${encodeURIComponent(usernameOrEmail)}`;
        }
        
        console.log('Login search URL:', searchUrl);
        
        const response = await fetch(searchUrl, {
          method: 'GET',
          headers: {
            'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFqdG9qZ2dqdG91dmdsamxvendyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MzAwMjAsImV4cCI6MjA3MDEwNjAyMH0.z1ggcCP5SbU3jvAOXmo8yD22fRBctQt7LI71LZTR7YM',
            'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFqdG9qZ2dqdG91dmdsamxvendyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MzAwMjAsImV4cCI6MjA3MDEwNjAyMH0.z1ggcCP5SbU3jvAOXmo8yD22fRBctQt7LI71LZTR7YM',
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          const users = await response.json();
          
          if (users && users.length > 0) {
            const user = users[0];
            
            // Verificar contraseña - comparar la contraseña ingresada con la almacenada
            if (user.password && user.password === password) {
              // Si encontró el usuario y la contraseña coincide, guardar sesión COMPLETA y redirigir
              console.log('Full user data from database:', user);
              
              localStorage.setItem('currentUser', JSON.stringify({
                username: user.username,
                email: user.email,
                rol: user.rol,
                codigo: user.codigo_usuario,
                // Guardar datos completos para que profile.html los encuentre siempre
                telefono: user.telefono,
                genero: user.genero,
                intereses: user.intereses,
                fecha_nacimiento: user.fecha_nacimiento,
                fecha_inscripcion: user.fecha_inscripcion,
                // Marcar que es una sesión completa desde database
                fromDatabase: true,
                databaseId: user.id || null
              }));
              
              console.log('Session saved with complete data');
              
              // Mostrar mensaje de éxito y redirigir a perfil
              mostrarMensaje('¡Login exitoso! Datos completos cargados. Redirigiendo...', 'success');
              setTimeout(() => {
                window.location.href = 'profile.html';
              }, 1000);
              
            } else {
              mostrarMensaje('Contraseña incorrecta. Verifica tus credenciales.', 'error');
            }
          } else {
            mostrarMensaje('Usuario no encontrado. Verifica tu email o código de usuario.', 'error');
          }
        } else {
          mostrarMensaje('Error al conectar con la base de datos.', 'error');
        }
        
      } catch (error) {
        console.error('Error al verificar credenciales:', error);
        mostrarMensaje('Error de conexión. Verifica tu conexión a internet.', 'error');
      }
    }
    
    // Función para mostrar mensajes al usuario
    function mostrarMensaje(mensaje, tipo) {
      const loginMsg = document.getElementById('login-msg');
      loginMsg.textContent = mensaje;
      loginMsg.style.display = 'block';
      
      // Cambiar color según el tipo de mensaje
      switch(tipo) {
        case 'success':
          loginMsg.style.color = '#22c55e'; // Verde
          break;
        case 'error':
          loginMsg.style.color = '#ef4444'; // Rojo
          break;
        case 'info':
          loginMsg.style.color = '#3b82f6'; // Azul
          break;
        default:
          loginMsg.style.color = '#22c55e';
      }
    }
    
    // Función para login como invitado
    function loginComoInvitado() {
      // Guardar datos del invitado en localStorage
      localStorage.setItem('currentUser', JSON.stringify({
        username: 'Invitado',
        email: 'guest@gma.cr',
        rol: 'invitado',
        codigo: 'GUEST_2025'
      }));
      
      // Mostrar mensaje y redirigir a perfil
      mostrarMensaje('¡Bienvenido, Invitado! Redirigiendo...', 'success');
      setTimeout(() => {
        window.location.href = 'profile.html';
      }, 1000);
    }
    
    // Función para login directo como invitado desde la página de ayuda
    function loginComoInvitadoDirecto() {
      loginComoInvitado();
      // Cerrar la página de ayuda después del login
      document.getElementById('ayuda').style.display = 'none';
    }
    
    // Función para mostrar opciones de login en Ayuda
    function mostrarOpcionesLoginRapido() {
      const opciones = confirm(
        "¿Deseas acceder como invitado para explorar el sistema?\n\n" +
        "• OK = Entrar como invitado\n" +
        "• Cancelar = Ver ayuda normal"
      );
      
      if (opciones) {
        loginComoInvitado();
        return false; // No mostrar ayuda normal
      } else {
        return true; // Mostrar ayuda normal
      }
    }
    
    // Permitir login con Enter
    document.addEventListener('DOMContentLoaded', function() {
      const passwordField = document.getElementById('login-password');
      passwordField.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          iniciarSesion();
        }
      });
      
      // Interceptar clic en enlace de Ayuda para mostrar la página directamente
      const ayudaLink = document.querySelector('a[href="#ayuda"]');
      if (ayudaLink) {
        ayudaLink.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('ayuda').style.display = 'block';
        });
      }
      
      // Hacer que el botón Cerrar de Ayuda funcione
      const cerrarAyudaBtn = document.getElementById('cerrar-ayuda');
      if (cerrarAyudaBtn) {
        cerrarAyudaBtn.addEventListener('click', function() {
          document.getElementById('ayuda').style.display = 'none';
        });
      }
      
      // === FUNCIONALIDAD DEL FORMULARIO DE CONTACTO ===
      
      // EmailJS configuration - DISABLED FOR NOW
      // emailjs.init("TU_PUBLIC_KEY_AQUI"); // CAMBIAR por tu Public Key de EmailJS
      
      // Manejar evento de envío del formulario de contacto
      const contactoForm = document.getElementById('contacto-form');
      if (contactoForm) {
        contactoForm.addEventListener('submit', enviarFormularioContacto);
      }
      
      // Hacer que el botón Cerrar de Contacto funcione
      const cerrarContactoBtn = document.getElementById('cerrar-contacto');
      if (cerrarContactoBtn) {
        cerrarContactoBtn.addEventListener('click', function() {
          document.getElementById('contacto').style.display = 'none';
        });
      }
      
      // Interceptar clic en enlace de Contacto para mostrar la página directamente
      const contactoLink = document.querySelector('a[href="#contacto"]');
      if (contactoLink) {
        contactoLink.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('contacto').style.display = 'block';
        });
      }
      
      // === FUNCIONALIDAD DE LA SECCIÓN APRENDE MÁS ===
      
      // Hacer que el botón Cerrar de Aprende más funcione
      const cerrarAprendeMasBtn = document.getElementById('cerrar-aprende-mas');
      if (cerrarAprendeMasBtn) {
        cerrarAprendeMasBtn.addEventListener('click', function() {
          document.getElementById('aprende-mas').style.display = 'none';
        });
      }
      
      // Interceptar clic en enlace de Aprende más para mostrar la página directamente
      const aprendeMasLink = document.querySelector('a[href="#aprende-mas"]');
      if (aprendeMasLink) {
        aprendeMasLink.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('aprende-mas').style.display = 'block';
        });
      }
    });
    
    // === FUNCIONES DEL FORMULARIO DE CONTACTO ===
    
    /**
     * Función principal para enviar el formulario de contacto
     * Valida los campos y usa EmailJS para enviar el correo
     */
    async function enviarFormularioContacto(e) {
      e.preventDefault(); // Prevenir envío normal del formulario
      
      // Obtener valores del formulario
      const nombre = document.getElementById('contacto-nombre').value.trim();
      const mensaje = document.getElementById('contacto-mensaje').value.trim();
      
      // Limpiar mensajes de error previos
      limpiarErroresContacto();
      
      // Validar campos
      let hayErrores = false;
      
      if (!nombre) {
        mostrarErrorContacto('error-nombre', 'El nombre es obligatorio');
        hayErrores = true;
      }
      
      if (!mensaje) {
        mostrarErrorContacto('error-mensaje', 'El mensaje es obligatorio');
        hayErrores = true;
      } else if (mensaje.length < 10) {
        mostrarErrorContacto('error-mensaje', 'El mensaje debe tener al menos 10 caracteres');
        hayErrores = true;
      }
      
      // Si hay errores, no continuar
      if (hayErrores) {
        return;
      }
      
      // Mostrar estado de carga
      mostrarEstadoEnvio('loading');
      
      // Create mailto link with form data
      try {
        const subject = encodeURIComponent(`Mensaje de contacto de ${nombre}`);
        const body = encodeURIComponent(
          `Hola,\n\n` +
          `Mi nombre es ${nombre} y me gustaría contactarte.\n\n` +
          `Mensaje:\n${mensaje}\n\n` +
          `---\n` +
          `Este mensaje fue enviado desde el formulario de contacto de Galaxia Magna Academy.`
        );
        
        const mailtoLink = `mailto:allan.villalobos.calderon@gmail.com?subject=${subject}&body=${body}`;
        
        // Open email client
        window.open(mailtoLink, '_blank');
        
        // Show success message
        setTimeout(() => {
          mostrarEstadoEnvio('mailto-success');
          
          // Clear form after 3 seconds
          setTimeout(() => {
            limpiarFormularioContacto();
            document.getElementById('contacto-status').style.display = 'none';
          }, 4000);
        }, 1000);
        
      } catch (error) {
        console.error('Error al crear enlace mailto:', error);
        mostrarEstadoEnvio('error');
      }
      
      /* ORIGINAL EmailJS CODE - UNCOMMENT WHEN EMAILJS IS CONFIGURED
      try {
        // Parámetros para el template de EmailJS
        const templateParams = {
          from_name: nombre,
          from_email: email,
          message: mensaje,
          to_email: 'allan.villalobos.calderon@gmail.com',
          reply_to: email
        };
        
        // Enviar correo usando EmailJS
        // NOTA: Debes cambiar 'TU_SERVICE_ID' y 'TU_TEMPLATE_ID' por los valores reales
        const response = await emailjs.send(
          'TU_SERVICE_ID_AQUI',  // Cambiar por tu Service ID
          'TU_TEMPLATE_ID_AQUI', // Cambiar por tu Template ID
          templateParams
        );
        
        console.log('Correo enviado exitosamente:', response);
        
        // Mostrar mensaje de éxito
        mostrarEstadoEnvio('success');
        
        // Limpiar formulario después de 2 segundos
        setTimeout(() => {
          limpiarFormularioContacto();
          document.getElementById('contacto-status').style.display = 'none';
        }, 3000);
        
      } catch (error) {
        console.error('Error al enviar correo:', error);
        mostrarEstadoEnvio('error');
      }
      */
    }
    
    /**
     * Valida formato de email usando expresión regular
     */
    function validarEmail(email) {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    }
    
    /**
     * Muestra mensajes de error en campos específicos
     */
    function mostrarErrorContacto(elementoId, mensaje) {
      const elemento = document.getElementById(elementoId);
      if (elemento) {
        elemento.textContent = mensaje;
        elemento.style.display = 'block';
      }
    }
    
    /**
     * Limpia todos los mensajes de error
     */
    function limpiarErroresContacto() {
      const errores = document.querySelectorAll('.error-message');
      errores.forEach(error => {
        error.textContent = '';
        error.style.display = 'none';
      });
    }
    
    /**
     * Muestra el estado del envío del formulario
     */
    function mostrarEstadoEnvio(estado) {
      const statusElement = document.getElementById('contacto-status');
      const btnText = document.getElementById('btn-text');
      const btnLoading = document.getElementById('btn-loading');
      const btnEnviar = document.getElementById('btn-enviar');
      
      switch (estado) {
        case 'loading':
          btnText.style.display = 'none';
          btnLoading.style.display = 'inline';
          btnEnviar.disabled = true;
          statusElement.style.display = 'none';
          break;
          
        case 'success':
          btnText.style.display = 'inline';
          btnLoading.style.display = 'none';
          btnEnviar.disabled = false;
          statusElement.textContent = '¡Mensaje enviado exitosamente! Te responderemos pronto.';
          statusElement.className = 'status-message success';
          statusElement.style.display = 'block';
          break;
          
        case 'demo-success':
          btnText.style.display = 'inline';
          btnLoading.style.display = 'none';
          btnEnviar.disabled = false;
          statusElement.textContent = '✅ DEMO: Formulario validado correctamente. (EmailJS no configurado aún)';
          statusElement.className = 'status-message success';
          statusElement.style.display = 'block';
          break;
          
        case 'mailto-success':
          btnText.style.display = 'inline';
          btnLoading.style.display = 'none';
          btnEnviar.disabled = false;
          statusElement.textContent = '📧 Tu cliente de email se ha abierto con el mensaje preparado. ¡Solo envíalo!';
          statusElement.className = 'status-message success';
          statusElement.style.display = 'block';
          break;
          
        case 'error':
          btnText.style.display = 'inline';
          btnLoading.style.display = 'none';
          btnEnviar.disabled = false;
          statusElement.textContent = 'Error al enviar el mensaje. Por favor, intenta nuevamente.';
          statusElement.className = 'status-message error';
          statusElement.style.display = 'block';
          break;
      }
    }
    
    /**
     * Limpia todos los campos del formulario de contacto
     */
    function limpiarFormularioContacto() {
      document.getElementById('contacto-nombre').value = '';
      document.getElementById('contacto-mensaje').value = '';
      limpiarErroresContacto();
    }
  </script>
</body>
</html>