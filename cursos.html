<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cursos - Galaxia Magna Academy</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

  <!--
    HEADER (Encabezado):
    Aquí va el título principal de la página. Sirve para que el usuario sepa dónde está y da identidad al sitio.
  -->
  <header>
    <img src="images/GAM_transparent.png" alt="Galaxia Magna Academy Logo" style="width: 80px; height: 80px; object-fit: contain;">
    <div class="header-text">
      <h1>Galaxia Magna Academy</h1>
      <h2>Sapientia per Stellam</h2>
    </div>
    <img src="images/GAM_transparent.png" alt="GMA Logo" style="width: 80px; height: 80px; object-fit: contain;">
  </header>

  <main>
    <!-- Loading Modal -->
    <div id="loading-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center;">
      <div style="background: #23232b; border-radius: 16px; padding: 40px; max-width: 400px; margin: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border: 2px solid #f18b32; text-align: center;">
        <div style="margin-bottom: 20px;">
          <i class="fas fa-spinner fa-spin" style="font-size: 36px; color: #f18b32;"></i>
        </div>
        <h3 style="color: #f18b32; margin-bottom: 16px; font-size: 1.4em;">Cargando Cursos...</h3>
        <p style="color: #c9c9c9; margin-bottom: 0; font-size: 1.0em;">Conectando con la base de datos</p>
      </div>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center;">
      <div style="background: #23232b; border-radius: 16px; padding: 40px; max-width: 500px; margin: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border: 2px solid #ef4444; text-align: center;">
        <div style="margin-bottom: 20px;">
          <i class="fas fa-exclamation-triangle" style="font-size: 36px; color: #ef4444;"></i>
        </div>
        <h3 style="color: #ef4444; margin-bottom: 16px; font-size: 1.4em;">Error al Cargar Cursos</h3>
        <p style="color: #c9c9c9; margin-bottom: 20px; font-size: 1.0em;" id="error-message">No se pudieron cargar los cursos desde la base de datos.</p>
        <div style="margin-top: 24px;">
          <button onclick="closeErrorModal()" style="background: #ef4444; color: white; border: none; padding: 12px 32px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1.0em; margin-right: 10px;">
            Cerrar
          </button>
          <button onclick="reloadCursos()" style="background: #f18b32; color: white; border: none; padding: 12px 32px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1.0em;">
            Reintentar
          </button>
        </div>
      </div>
    </div>

    <section>
      <!-- Navigation -->
      <nav style="margin-bottom: 20px;">
        <ul>
          <li><a href="index.html">← Volver al Inicio</a></li>
          <li><a href="registro.html">Registro</a></li>
          <li><a href="profile.html">Perfil</a></li>
        </ul>
      </nav>

      <!-- Page Header -->
      <div style="text-align: center; margin-bottom: 40px;">
        <h2 style="color: #f18b32; margin-bottom: 10px;">
          <i class="fas fa-book" style="margin-right: 10px;"></i>
          Catálogo de Cursos
        </h2>
        <p style="color: #C0C0C0; font-size: 1.1em;">Explora nuestra oferta académica</p>
      </div>

      <!-- Admin Login Section -->
      <div id="admin-login-section" style="background: #23232b; border-radius: 12px; padding: 20px; margin-bottom: 30px; border: 1px solid #3a3a3a;">
        <h4 style="color: #f18b32; margin-bottom: 20px;">
          <i class="fas fa-user-shield" style="margin-right: 10px;"></i>
          Panel de Administración
        </h4>
        <div class="row">
          <div class="col-md-6">
            <label for="admin-password" class="form-label" style="color: #c9c9c9;">Contraseña de Administrador:</label>
            <input type="password" class="form-control" id="admin-password" placeholder="Ingrese contraseña de admin">
          </div>
          <div class="col-md-6" style="display: flex; align-items: end;">
            <button onclick="loginAsAdmin()" class="btn btn-primary me-2">
              <i class="fas fa-sign-in-alt" style="margin-right: 5px;"></i>
              Iniciar Sesión Admin
            </button>
            <button onclick="logoutAdmin()" class="btn btn-outline-secondary" id="logout-btn" style="display: none;">
              <i class="fas fa-sign-out-alt" style="margin-right: 5px;"></i>
              Cerrar Sesión
            </button>
          </div>
        </div>
        <div id="admin-status" style="margin-top: 10px; font-weight: bold;"></div>
      </div>

      <!-- Admin Controls (hidden by default) -->
      <div id="admin-controls" style="display: none; background: #2d2d35; border-radius: 12px; padding: 20px; margin-bottom: 30px; border: 1px solid #f18b32;">
        <h4 style="color: #f18b32; margin-bottom: 20px;">
          <i class="fas fa-plus-circle" style="margin-right: 10px;"></i>
          Agregar Nuevo Curso
        </h4>
        <form id="add-curso-form">
          <div class="row">
            <div class="col-md-3">
              <label for="new-cuatrimestre" class="form-label" style="color: #c9c9c9;">Cuatrimestre:</label>
              <select class="form-select" id="new-cuatrimestre" required>
                <option value="">Seleccionar</option>
                <option value="I">I Cuatrimestre</option>
                <option value="II">II Cuatrimestre</option>
                <option value="III">III Cuatrimestre</option>
                <option value="Verano">Verano</option>
              </select>
            </div>
            <div class="col-md-3">
              <label for="new-codigo" class="form-label" style="color: #c9c9c9;">Código:</label>
              <input type="text" class="form-control" id="new-codigo" placeholder="Ej: PROG101" required>
            </div>
            <div class="col-md-4">
              <label for="new-curso" class="form-label" style="color: #c9c9c9;">Nombre del Curso:</label>
              <input type="text" class="form-control" id="new-curso" placeholder="Ej: Programación I" required>
            </div>
            <div class="col-md-2">
              <label for="new-creditos" class="form-label" style="color: #c9c9c9;">Créditos:</label>
              <input type="number" class="form-control" id="new-creditos" min="1" max="6" required>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              <label for="new-requisitos" class="form-label" style="color: #c9c9c9;">Requisitos:</label>
              <textarea class="form-control" id="new-requisitos" rows="2" placeholder="Ej: Matemática Básica, Lógica"></textarea>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              <button type="submit" class="btn btn-success">
                <i class="fas fa-plus" style="margin-right: 5px;"></i>
                Agregar Curso
              </button>
              <button type="button" onclick="clearAddForm()" class="btn btn-outline-secondary ms-2">
                <i class="fas fa-eraser" style="margin-right: 5px;"></i>
                Limpiar
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- Statistics Cards -->
      <div class="row mb-4" id="stats-section" style="display: none;">
        <div class="col-md-3">
          <div style="background: #23232b; border-radius: 12px; padding: 20px; text-align: center; border: 1px solid #3a3a3a;">
            <i class="fas fa-book" style="font-size: 2em; color: #f18b32; margin-bottom: 10px;"></i>
            <h4 style="color: #f18b32; margin: 0;" id="total-cursos">0</h4>
            <p style="color: #c9c9c9; margin: 0;">Total Cursos</p>
          </div>
        </div>
        <div class="col-md-3">
          <div style="background: #23232b; border-radius: 12px; padding: 20px; text-align: center; border: 1px solid #3a3a3a;">
            <i class="fas fa-star" style="font-size: 2em; color: #fbbf24; margin-bottom: 10px;"></i>
            <h4 style="color: #fbbf24; margin: 0;" id="total-creditos">0</h4>
            <p style="color: #c9c9c9; margin: 0;">Créditos Totales</p>
          </div>
        </div>
        <div class="col-md-3">
          <div style="background: #23232b; border-radius: 12px; padding: 20px; text-align: center; border: 1px solid #3a3a3a;">
            <i class="fas fa-calendar" style="font-size: 2em; color: #22c55e; margin-bottom: 10px;"></i>
            <h4 style="color: #22c55e; margin: 0;" id="total-cuatrimestres">0</h4>
            <p style="color: #c9c9c9; margin: 0;">Cuatrimestres</p>
          </div>
        </div>
        <div class="col-md-3">
          <div style="background: #23232b; border-radius: 12px; padding: 20px; text-align: center; border: 1px solid #3a3a3a;">
            <i class="fas fa-graduation-cap" style="font-size: 2em; color: #8b5cf6; margin-bottom: 10px;"></i>
            <h4 style="color: #8b5cf6; margin: 0;" id="promedio-creditos">0</h4>
            <p style="color: #c9c9c9; margin: 0;">Promedio Créditos</p>
          </div>
        </div>
      </div>

      <!-- Filters Section -->
      <div style="background: #23232b; border-radius: 12px; padding: 20px; margin-bottom: 30px; border: 1px solid #3a3a3a;">
        <h4 style="color: #f18b32; margin-bottom: 20px;">
          <i class="fas fa-filter" style="margin-right: 10px;"></i>
          Filtros
        </h4>
        <div class="row">
          <div class="col-md-4">
            <label for="filter-cuatrimestre" class="form-label" style="color: #c9c9c9;">Cuatrimestre:</label>
            <select class="form-select" id="filter-cuatrimestre" onchange="filterCursos()">
              <option value="">Todos los cuatrimestres</option>
            </select>
          </div>
          <div class="col-md-4">
            <label for="filter-creditos" class="form-label" style="color: #c9c9c9;">Créditos:</label>
            <select class="form-select" id="filter-creditos" onchange="filterCursos()">
              <option value="">Todos los créditos</option>
              <option value="1">1 crédito</option>
              <option value="2">2 créditos</option>
              <option value="3">3 créditos</option>
              <option value="4">4 créditos</option>
              <option value="5">5 créditos</option>
              <option value="6">6 créditos</option>
            </select>
          </div>
          <div class="col-md-4">
            <label for="search-input" class="form-label" style="color: #c9c9c9;">Buscar:</label>
            <input type="text" class="form-control" id="search-input" placeholder="Buscar por código, nombre o requisitos..." oninput="filterCursos()">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-12">
            <button onclick="clearFilters()" class="btn btn-outline-secondary">
              <i class="fas fa-times" style="margin-right: 5px;"></i>
              Limpiar Filtros
            </button>
          </div>
        </div>
      </div>

      <!-- Cursos Grid -->
      <div id="cursos-container" class="row">
        <!-- Los cursos se cargarán aquí dinámicamente -->
      </div>

      <!-- No Results Message -->
      <div id="no-results" style="display: none; text-align: center; padding: 60px 20px;">
        <i class="fas fa-search" style="font-size: 4em; color: #6b7280; margin-bottom: 20px;"></i>
        <h3 style="color: #c9c9c9; margin-bottom: 10px;">No se encontraron cursos</h3>
        <p style="color: #9ca3af;">Intenta ajustar los filtros o términos de búsqueda</p>
      </div>

    </section>
  </main>

  <footer style="margin-top: 60px; padding: 20px; text-align: center; border-top: 1px solid #3a3a3a;">
    <p style="color: #6b7280; margin: 0;">© 2025 Galaxia Magna Academy - Todos los derechos reservados</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
  
  <!-- JavaScript moved to script.js -->

</body>
</html>
