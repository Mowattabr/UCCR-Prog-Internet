<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Administración de Cursos - Galaxia Magna Academy</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
  <!-- Header -->
  <header>
    <img src="images/GAM_transparent.png" alt="Galaxia Magna Academy Logo" style="width: 80px; height: 80px; object-fit: contain;">
    <div class="header-text">
      <h1>Galaxia Magna Academy</h1>
      <h2>Panel de Administración - Cursos</h2>
    </div>
    <img src="images/GAM_transparent.png" alt="GMA Logo" style="width: 80px; height: 80px; object-fit: contain;">
  </header>

  <main>
    <!-- Navigation -->
    <nav class="admin-nav">
      <ul>
        <li><a href="profile.html">← Volver al Perfil</a></li>
        <li><a href="admin_lista_usuarios.html">Administrar Usuarios</a></li>
        <li><a href="index.html">Inicio</a></li>
      </ul>
    </nav>

    <!-- Admin Authentication Modal -->
    <div id="admin-auth-modal" class="admin-modal">
      <div class="admin-modal-content">
        <div class="icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <h3>Acceso de Administrador</h3>
        <p>Ingrese la contraseña de administrador para continuar:</p>
        
        <div style="margin-bottom: 20px;">
          <input type="password" id="admin-password" placeholder="Contraseña de administrador">
          <div id="admin-error" class="admin-error">Contraseña incorrecta</div>
        </div>
        
        <div class="button-group">
          <button onclick="validateAdminAccess()" class="btn-primary">
            Acceder
          </button>
          <button onclick="goBack()" class="btn-secondary">
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <!-- Main Content (hidden until admin authenticated) -->
    <div id="main-content" style="display: none;">
      <!-- Message Area -->
      <div id="message-area" style="display: none; padding: 12px; border-radius: 8px; margin-bottom: 20px; font-weight: bold;"></div>

      <!-- Admin Info -->
      <div style="background: #23232b; border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 2px solid #f18b32;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <i class="fas fa-user-shield" style="color: #f18b32; font-size: 1.5em;"></i>
          <div>
            <h3 style="color: #f18b32; margin: 0; font-size: 1.2em;">Panel de Administrador</h3>
            <p style="color: #c9c9c9; margin: 0; font-size: 0.9em;">Gestión completa de cursos académicos</p>
          </div>
        </div>
      </div>

      <!-- Course Statistics -->
      <div class="row mb-4">
        <div class="col-md-4">
          <div style="background: #333; border-radius: 6px; padding: 12px; text-align: center; border: 1px solid #555; font-family: 'Consolas', monospace;">
            <i class="fas fa-book" style="color: #888; font-size: 1.2em; margin-bottom: 6px;"></i>
            <h4 style="color: #ccc; margin: 0; font-size: 1.4em;" id="total-courses">0</h4>
            <p style="color: #888; margin: 0; font-size: 0.85em;">Total Cursos</p>
          </div>
        </div>
        <div class="col-md-4">
          <div style="background: #333; border-radius: 6px; padding: 12px; text-align: center; border: 1px solid #555; font-family: 'Consolas', monospace;">
            <i class="fas fa-graduation-cap" style="color: #888; font-size: 1.2em; margin-bottom: 6px;"></i>
            <h4 style="color: #ccc; margin: 0; font-size: 1.4em;" id="total-credits">0</h4>
            <p style="color: #888; margin: 0; font-size: 0.85em;">Total Créditos</p>
          </div>
        </div>
        <div class="col-md-4">
          <div style="background: #333; border-radius: 6px; padding: 12px; text-align: center; border: 1px solid #555; font-family: 'Consolas', monospace;">
            <i class="fas fa-calendar-alt" style="color: #888; font-size: 1.2em; margin-bottom: 6px;"></i>
            <h4 style="color: #ccc; margin: 0; font-size: 1.4em;" id="current-quarter">I</h4>
            <p style="color: #888; margin: 0; font-size: 0.85em;">Cuatrimestre Actual</p>
          </div>
        </div>
      </div>

      <!-- Add New Course Button -->
      <div style="margin-bottom: 20px; text-align: center;">
        <button onclick="showAddCourseModal()" style="background: #22c55e; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 1.1em; margin-right: 10px;">
          Agregar Nuevo Curso
        </button>
        <button onclick="testDatabaseConnection()" style="background: #3b82f6; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 1.1em; margin-right: 10px;">
          Probar Conexión
        </button>
        <button onclick="simpleTest()" style="background: #f59e0b; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 1.1em;">
          Test Simple
        </button>
      </div>

      <!-- Course Filters -->
      <div class="row mb-4">
        <div class="col-md-4">
          <label for="filter-quarter" class="form-label" style="color: #888; font-family: 'Consolas', monospace; font-size: 0.85em;">Filtrar por Cuatrimestre:</label>
          <select id="filter-quarter" class="form-select form-select-sm" onchange="filterCourses()" style="background: #333; color: #ccc; border: 1px solid #555; font-family: 'Consolas', monospace; font-size: 0.85em;">
            <option value="">Todos los cuatrimestres</option>
            <option value="I">Cuatrimestre I</option>
            <option value="II">Cuatrimestre II</option>
            <option value="III">Cuatrimestre III</option>
            <option value="IV">Cuatrimestre IV</option>
            <option value="V">Cuatrimestre V</option>
            <option value="VI">Cuatrimestre VI</option>
            <option value="VII">Cuatrimestre VII</option>
            <option value="VIII">Cuatrimestre VIII</option>
          </select>
        </div>
        <div class="col-md-4">
          <label for="filter-search" class="form-label" style="color: #888; font-family: 'Consolas', monospace; font-size: 0.85em;">Buscar curso:</label>
          <input type="text" id="filter-search" class="form-control form-control-sm" placeholder="Nombre o código del curso" 
                 onkeyup="filterCourses()" style="background: #333; color: #ccc; border: 1px solid #555; font-family: 'Consolas', monospace; font-size: 0.85em;">
        </div>
        <div class="col-md-4">
          <label for="filter-credits" class="form-label" style="color: #888; font-family: 'Consolas', monospace; font-size: 0.85em;">Filtrar por Créditos:</label>
          <select id="filter-credits" class="form-select form-select-sm" onchange="filterCourses()" style="background: #333; color: #ccc; border: 1px solid #555; font-family: 'Consolas', monospace; font-size: 0.85em;">
            <option value="">Todos los créditos</option>
            <option value="1">1 crédito</option>
            <option value="2">2 créditos</option>
            <option value="3">3 créditos</option>
            <option value="4">4 créditos</option>
            <option value="5">5 créditos</option>
          </select>
        </div>
      </div>

      <!-- Courses Table -->
      <div style="background: #2a2a2a; border-radius: 6px; padding: 16px; border: 1px solid #555;">
        <h3 style="color: #f18b32; margin-bottom: 16px; font-family: 'Consolas', monospace; font-size: 1.1em;">
          Lista de Cursos
        </h3>
        
        <div class="table-responsive">
          <table class="table table-sm sql-table" style="font-family: 'Consolas', monospace; font-size: 0.85em;">
            <thead style="background-color: #2a2a2a;">
              <tr style="border-bottom: 1px solid #555; background-color: #2a2a2a;">
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">CUATR</th>
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">CÓDIGO</th>
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">CURSO</th>
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">REQUISITOS</th>
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">CRÉD</th>
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">ESTADO</th>
                <th style="color: #fff; border: none; padding: 6px; font-weight: normal; background-color: #2a2a2a;">ACCIONES</th>
              </tr>
            </thead>
            <tbody id="courses-table-body" class="sql-table">
              <!-- Courses will be loaded here -->
            </tbody>
          </table>
        </div>
        
        <div id="no-courses-message" style="text-align: center; color: #666; margin: 20px 0; display: none; font-family: 'Consolas', monospace;">
          <p style="font-size: 0.9em;">No hay cursos disponibles</p>
        </div>
      </div>
    </div>

    <!-- Add/Edit Course Modal -->
    <div id="course-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center;">
      <div style="background: #23232b; border-radius: 16px; padding: 40px; max-width: 600px; margin: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border: 2px solid #f18b32; width: 90%;">
        <h3 id="modal-title" style="color: #f18b32; margin-bottom: 20px; text-align: center;">Agregar Nuevo Curso</h3>
        
        <form id="course-form">
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="course-quarter" class="form-label" style="color: #c9c9c9;">Cuatrimestre:</label>
                <select id="course-quarter" class="form-select" required style="background: #2d2d35; color: #c9c9c9; border: 1px solid #4a4a55;">
                  <option value="">Seleccionar cuatrimestre</option>
                  <option value="I">Cuatrimestre I</option>
                  <option value="II">Cuatrimestre II</option>
                  <option value="III">Cuatrimestre III</option>
                  <option value="IV">Cuatrimestre IV</option>
                  <option value="V">Cuatrimestre V</option>
                  <option value="VI">Cuatrimestre VI</option>
                  <option value="VII">Cuatrimestre VII</option>
                  <option value="VIII">Cuatrimestre VIII</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="course-code" class="form-label" style="color: #c9c9c9;">Código del Curso:</label>
                <input type="text" id="course-code" class="form-control" required placeholder="Ej: MAT101" 
                       style="background: #2d2d35; color: #c9c9c9; border: 1px solid #4a4a55;">
              </div>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="course-name" class="form-label" style="color: #c9c9c9;">Nombre del Curso:</label>
            <input type="text" id="course-name" class="form-control" required placeholder="Ej: Matemáticas Básicas" 
                   style="background: #2d2d35; color: #c9c9c9; border: 1px solid #4a4a55;">
          </div>
          
          <div class="mb-3">
            <label for="course-requirements" class="form-label" style="color: #c9c9c9;">Requisitos:</label>
            <input type="text" id="course-requirements" class="form-control" placeholder="Ej: Ninguno o MAT100" 
                   style="background: #2d2d35; color: #c9c9c9; border: 1px solid #4a4a55;">
          </div>
          
          <div class="mb-3">
            <label for="course-credits" class="form-label" style="color: #c9c9c9;">Créditos:</label>
            <select id="course-credits" class="form-select" required style="background: #2d2d35; color: #c9c9c9; border: 1px solid #4a4a55;">
              <option value="">Seleccionar créditos</option>
              <option value="1">1 crédito</option>
              <option value="2">2 créditos</option>
              <option value="3">3 créditos</option>
              <option value="4">4 créditos</option>
              <option value="5">5 créditos</option>
            </select>
          </div>
          
          <div style="display: flex; gap: 12px; justify-content: center; margin-top: 30px;">
            <button type="submit" style="background: #22c55e; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold;">
              <span id="save-button-text">Guardar Curso</span>
            </button>
            <button type="button" onclick="closeModal()" style="background: #6b7280; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script src="script.js"></script>
</body>

</html>
